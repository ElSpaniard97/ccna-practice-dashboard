<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>CCNA Flashcards</title>
  <style>
    :root{
      --sidebar:#1f2937; --sidebar-dark:#111827; --header:#111827;
      --bg:#f5f6fa; --card:#ffffff; --text:#111827; --muted:#6b7280; --accent:#2563eb;
      --shadow:0 2px 8px rgba(0,0,0,0.05);
    }
    [data-theme="dark"]{
      --sidebar:#111827; --sidebar-dark:#0f172a; --header:#0f172a;
      --bg:#0d1117; --card:#1e293b; --text:#e5e7eb; --muted:#94a3b8;
      --shadow:0 2px 8px rgba(0,0,0,0.3);
    }
    *{box-sizing:border-box;margin:0;padding:0;transition:background-color .3s,color .3s;}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,sans-serif;background:var(--bg);color:var(--text);}
    .app{display:grid;grid-template-columns:240px 1fr;grid-template-rows:56px 1fr;
         grid-template-areas:"sidebar header" "sidebar main";height:100vh;}

    .sidebar{grid-area:sidebar;background:linear-gradient(180deg,var(--sidebar),var(--sidebar-dark));
             color:#e5e7eb;display:flex;flex-direction:column;}
    .brand{padding:16px;font-size:1.1rem;font-weight:600;border-bottom:1px solid rgba(255,255,255,0.1);}
    .nav{flex:1;padding:12px;}
    .nav a{display:block;padding:10px 14px;border-radius:6px;color:#d1d5db;text-decoration:none;}
    .nav a:hover,.nav a.active{background:rgba(255,255,255,0.1);color:#fff;}

    .header{grid-area:header;background:var(--header);color:#e5e7eb;display:flex;align-items:center;
            justify-content:space-between;padding:0 20px;}
    .toggle{background:none;border:1px solid rgba(255,255,255,0.3);color:#e5e7eb;
            padding:6px 12px;border-radius:6px;cursor:pointer;}

    .main{grid-area:main;padding:20px;overflow:auto;text-align:center;}
    h2{margin-bottom:8px}
    p.helper{color:var(--muted);margin-bottom:12px}
    select{padding:8px;border:1px solid #ddd;border-radius:6px;margin-bottom:20px;font-size:1rem}

    .flashcard{width:340px;height:220px;perspective:1000px;cursor:pointer;margin:0 auto;}
    .inner{position:relative;width:100%;height:100%;transition:transform .6s;transform-style:preserve-3d;}
    .flashcard.flipped .inner{transform:rotateY(180deg);}
    .front,.back{
      position:absolute;width:100%;height:100%;backface-visibility:hidden;border-radius:10px;
      box-shadow:var(--shadow);background:var(--card);display:flex;align-items:center;justify-content:center;
      padding:16px;text-align:center;
    }
    .front{font-weight:600;font-size:1rem;}
    .back{transform:rotateY(180deg);background:#e0e7ff;color:#1e3a8a;font-size:.95rem;}

    .controls{margin-top:18px;display:flex;justify-content:center;gap:10px;flex-wrap:wrap}
    .controls button{padding:10px 16px;border:none;border-radius:6px;background:var(--accent);color:#fff;cursor:pointer}
    .controls button.secondary{background:#64748b}
    .meta{margin-top:10px;color:var(--muted)}

    /* Loader */
    .loader{position:fixed;inset:0;background:rgba(0,0,0,.4);display:flex;align-items:center;
            justify-content:center;backdrop-filter:blur(2px);visibility:hidden;z-index:999}
    .loader.show{visibility:visible}
    .spinner{width:60px;height:60px;border:6px solid #cbd5e1;border-top-color:var(--accent);
             border-radius:50%;animation:spin 1s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}

    @media(max-width:900px){.app{grid-template-columns:0 1fr}.sidebar{display:none}}
  </style>
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <div class="brand">CCNA Dashboard</div>
      <div class="nav">
        <a href="index.html">Dashboard</a>
        <a href="questions.html">Practice Test</a>
        <a href="flashcards.html" class="active">Flashcards</a>
      </div>
    </aside>

    <header class="header">
      <h2>Flashcards</h2>
      <button id="themeToggle" class="toggle">ðŸŒ™</button>
    </header>

    <main class="main">
      <h2>Study by Section</h2>
      <p class="helper">Select a CCNA section, then use Flip / Previous / Next / Shuffle.</p>
      <select id="sectionSelect"><option value="">-- Choose Section --</option></select>

      <div id="flashcardArea"></div>

      <div class="controls" id="controls" style="display:none">
        <button id="prevBtn" class="secondary">Previous</button>
        <button id="flipBtn">Flip</button>
        <button id="nextBtn" class="secondary">Next</button>
        <button id="shuffleBtn">Shuffle</button>
      </div>

      <div class="meta" id="meta"></div>
    </main>
  </div>

  <div class="loader" id="loader"><div class="spinner"></div></div>

  <script type="module">
    import { QUESTIONS_SECTIONS } from './questions-data.js';

    /* Theme */
    const toggle=document.getElementById('themeToggle');
    const savedTheme=localStorage.getItem('theme')||'light';
    if(savedTheme==='dark'){document.documentElement.setAttribute('data-theme','dark');toggle.textContent='â˜€ï¸';}
    toggle.addEventListener('click',()=>{
      const isDark=document.documentElement.getAttribute('data-theme')==='dark';
      if(isDark){document.documentElement.removeAttribute('data-theme');toggle.textContent='ðŸŒ™';localStorage.setItem('theme','light');}
      else{document.documentElement.setAttribute('data-theme','dark');toggle.textContent='â˜€ï¸';localStorage.setItem('theme','dark');}
    });

    const loader=document.getElementById('loader');
    const showLoader=(on)=>loader.classList.toggle('show',on);

    const sectionSelect=document.getElementById('sectionSelect');
    const flashcardArea=document.getElementById('flashcardArea');
    const controls=document.getElementById('controls');
    const prevBtn=document.getElementById('prevBtn');
    const nextBtn=document.getElementById('nextBtn');
    const flipBtn=document.getElementById('flipBtn');
    const shuffleBtn=document.getElementById('shuffleBtn');
    const meta=document.getElementById('meta');

    let cards=[]; let index=0;

    // Populate sections
    QUESTIONS_SECTIONS.forEach(sec=>{
      const opt=document.createElement('option');
      opt.value=sec.id; opt.textContent=sec.title;
      sectionSelect.appendChild(opt);
    });

    sectionSelect.addEventListener('change', ()=>{
      const id=sectionSelect.value;
      if(!id){flashcardArea.innerHTML='';controls.style.display='none';meta.textContent='';return;}
      const section=QUESTIONS_SECTIONS.find(s=>s.id===id);
      if(!section)return;
      showLoader(true);
      setTimeout(()=>{
        cards=[...section.items];
        index=0; controls.style.display='flex';
        renderCard(); showLoader(false);
      },250);
    });

    function renderCard(){
      if(!cards.length) return;
      const q=cards[index];
      flashcardArea.innerHTML=`
        <div class="flashcard" id="card">
          <div class="inner">
            <div class="front">${index+1}. ${q.q}</div>
            <div class="back"><strong>${q.options[q.answer]}</strong><br><br><em>${q.explanation}</em></div>
          </div>
        </div>`;
      const card=document.getElementById('card');
      card.addEventListener('click',()=>card.classList.toggle('flipped'));
      meta.textContent=\`Card \${index+1} of \${cards.length}\`;
    }

    prevBtn.addEventListener('click', ()=>{ if(index>0){ index--; renderCard(); }});
    nextBtn.addEventListener('click', ()=>{ if(index<cards.length-1){ index++; renderCard(); }});
    flipBtn.addEventListener('click', ()=>{
      const card=document.getElementById('card');
      if(card) card.classList.toggle('flipped');
    });
    shuffleBtn.addEventListener('click', ()=>{
      showLoader(true);
      setTimeout(()=>{
        cards = cards.sort(()=>Math.random()-0.5);
        index=0; renderCard(); showLoader(false);
      },200);
    });
  </script>
</body>
</html>
